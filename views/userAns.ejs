<!DOCTYPE html>
<html lang="en">

<head>
  <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link rel="stylesheet" href="/stylesheets/old/userList.css" />

  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IEEECS CCS ADMIN</title>
  <style>
    .q {
      color: #faa41a;
    }
  </style>
</head>

<body>
  <div class="navbar-fixed">
    <nav class="nav-extended nav">
      <div class="nav-wrapper">
        <a href="#" class="brand-logo center"><img src="/images/IEEE-CS_New.png" alt="logo" class="custom-logo" /></a>
        <a href="#" data-activates="mobile-demo" class="button-collapse"><em class="material-icons">menu</em></a>

        <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li><a href="/admin/home">HOME</a></li>
          <li><a href="/admin/logout">LOGOUT</a></li>
        </ul>

        <ul class="side-nav" id="mobile-demo">
          <li><a href="/admin/home">HOME</a></li>
          <li><a href="/admin/logout">LOGOUT</a></li>
        </ul>
      </div>
      <div>
        <% data.response.regno %>
      </div>
      <div class="nav-content">
        <ul class="tabs tabs-transparent">
          <li class="tab"><a class="active" href="#tech">Technical</a></li>
          <li class="tab"><a href="#manag">Management</a></li>
          <li class="tab"><a href="#design">Design</a></li>
          <li class="tab"><a href="#doc">Documentation</a></li>
        </ul>
      </div>
    </nav>
  </div>

  <div>&nbsp;</div>
  <div>&nbsp;</div>
  <div>&nbsp;</div>

  <div>
    <% var technical = []; %>
    <% var design = []; %>
    <% var management = []; %>
    <% var documentation = []; %>
    <% data.response.forEach((obj) => { %>
    <% if (obj.questionId.qDomain == "technical") { %>
    <% technical.push(obj); %>
    <% } else if (obj.questionId.qDomain == "management") { %> 
    <% management.push(obj); %>
    <% } else if (obj.questionId.qDomain == "design") { %>
    <% design.push(obj); %>
    <% } else { %>
    <% documentation.push(obj); %>
    <% }}); %>
  </div>

  <!-- Technical -->
  <div id="tech" class="col s12 scrollable">
    <div class="container white-text">
      <% var tcntr=0; %>
      <% technical.forEach((obj) => { %>
      <% tcntr++; %>
      <p>
      <h5 class="q">Question <%= tcntr %> </h5>
      </p>
      <p>
      <h5><%= obj.questionId.question %></h5>
      </p>
      <p>
      <h5 class="q">User Answer:</h5>
      </p>
      <p>
      <h5> <%= obj.userSolution %> </h5>
      </p>
      <p>
      <h5 class="q">Expected Answer</h5>
      </p>
      <p>
      <h5><%= obj.questionId.answer %></h5>
      </p>
      <div>&nbsp;</div>
      <hr>
      <div>&nbsp;</div>
      <% }); %>
      <% if (tcntr==0) { %>
      <p class="white-text">Not chosen!</p>
      <% } %>
    </div>
  </div>
  <!-- END Technical -->

  <!-- Management -->
  <div id="manag" class="col s12 scrollable">
    <div class="container white-text">
      <% var mcntr=0; %>
      <% management.forEach((obj) => { %>
      <% mcntr++; %>
      <p>
      <h5 class="q">Question <%= mcntr %>
      </h5>
      </p>
      <p>
      <h5><%= obj.questionId.question %></h5>
      </p>
      <p>
      <h5 class="q">User Answer:</h5>
      </p>
      <p>
      <h5>
        <%= obj.userSolution %>
      </h5>
      </p>
      <p>
      <h5 class="q">Expected Answer:
      </h5>
      </p>
      <p>
      <h5>
        <%= obj.questionId.answer %>
      </h5>
      </p>
      <div>&nbsp;</div>
      <hr>
      <div>&nbsp;</div>
      <% }); %>
      <% if (mcntr==0) { %>
      <p class="white-text">Not chosen!</p>
      <% } %>
    </div>
  </div>
  <!-- END Management -->

  <!-- Design -->
  <div id="design" class="col s12 scrollable">

    <div class="container white-text">
      <% var descntr = 0; %>
      <% design.forEach((obj) => { %>
      <% descntr++; %>
      <p>
      <h5 class="q">Question <%= descntr %>
      </h5>
      </p>
      <h5><%= obj.questionId.question %></h5>
      <p>
      <h5 class="q">User Answer:</h5>
      </p>
      <p>
      <h5>
        <%= obj.userSolution %>
      </h5>
      </p>
      <p>
      <h5 class="q">Expected Answer:
      </h5>
      </p>
      <p>
      <h5>
        <%= obj.questionId.answer %>
      </h5>
      </p>
      <div>&nbsp;</div>
      <hr>
      <div>&nbsp;</div>
      <% }); %>
      <% if (descntr == 0) { %>
      <p class="white-text">Not chosen!</p>
      <% } %>
    </div>

  </div>
  <!-- END Design -->

  <!--Documentation-->
  <div id="doc" class="col s12 scrollable">
    <div class="container white-text">
      <% var dcntr = 0; %>
      <% documentation.forEach((obj) => { %>
      <% dcntr; %>
      <p>
      <h5 class="q"> Question <%= dcntr %> </h5>
      </p>
      <h5><%= obj.questionId.question %></h5>
      <p>
      <h5 class="q">User Answer:</h5>
      </p>
      <p>
      <h5><%= obj.userSolution %> </h5>
      </p>
      <p>
      <h5 class="q">Expected Answer: </h5>
      </p>
      <p>
      <h5><%= obj.questionId.answer %> </h5>
      </p>
      <div>&nbsp;</div>
      <hr />
      <div>&nbsp;</div>
      <% }); %>
      <% if (dcntr==0) { %>
      <p class="white-text">Not chosen!</p>
      <% } %>
    </div>
  </div>
  <!--END Documentation-->

  <footer class="page-footer myfooter">
    <div class="container">
      <a onclick="submit1()" class="waves-effect waves-light btn modal-trigger green black-text"
        href="#modal">ACCEPT</a>
      <a onclick="submit2()" class="waves-effect waves-light btn modal-trigger yellow darken-1 black-text"
        href="#modal">HOLD</a>
      <a onclick="submit3()" class="waves-effect waves-light btn modal-trigger red black-text" href="#modal">REJECT</a>
      <div id="modal" class="modal indigo lighten-5">
        <div class="modal-content">
          <p>Are you sure you want to proceed?</p>
        </div>
        <div class="modal-footer indigo lighten-5">
          <a href="/admin" class="modal-close waves-effect waves-green btn-flat">YES</a>
        </div>
      </div>
    </div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
    <div>&nbsp;</div>
  </footer>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>

  <script>
    $(document).ready(function () {
      $(".collapsible").collapsible();
    });

    $(document).ready(function () {
      $(".modal").modal();
    });
    $(document).ready(function () {
      $(".button-collapse").sideNav();
      $(".parallax").parallax();
    });
    $(document).ready(function () {
      $(".tabs").tabs();
    });
    function submit1() {
      console.log("<%= data[0].regno %>");
      var status = "approved";
      console.log(status);
      $.ajax({
        url: "/admin/userData/<%= data[0].regno %>",
        method: "POST",
        dataType: "json",
        contentType: "application/x-www-form-urlencoded",
        data: { status: status },
        success: function (res) {
          if (res.success == true) {
            console.log("Done!");
          }
        },
        error: function (msg) {
          console.log(msg);
        },
      });
    }
    function submit2() {
      console.log("<%= data[0].regno %>");
      var status = "hold";
      console.log(status);
      $.ajax({
        url: "/admin/userData/<%= data[0].regno %>",
        method: "POST",
        dataType: "json",
        contentType: "application/x-www-form-urlencoded",
        data: { status: status },
        success: function (res) {
          if (res.success == true) {
            console.log("Done!");
          }
        },
        error: function (msg) {
          console.log(msg);
        },
      });
    }
    function submit3() {
      console.log("<%= data[0].regno %>");
      var status = "reject";
      console.log(status);
      $.ajax({
        url: "/admin/userData/<%= data[0].regno %>",
        method: "POST",
        dataType: "json",
        contentType: "application/x-www-form-urlencoded",
        data: { status: status },
        success: function (res) {
          if (res.success == true) {
            console.log("Done!");
          }
        },
        error: function (msg) {
          console.log(msg);
        },
      });
    }
  </script>
  <script>
    let questionElements = document.getElementsByTagName("h5");
    for (let i = 0; i < questionElements.length; i++) {
      questionElements[i].innerHTML = questionElements[i].innerHTML.replace(
        /(\\n|\n)/g,
        "<br />"
      );
    }
  </script>
</body>

</html>